{% extends "layout.html" %}
{% block body %}
<script src="{{ url_for('static', filename='js/highcharts.js') }}"></script>
<script src="{{ url_for('static', filename='custom_js/main.js') }}"></script>
<div id="accordion">
  <div class="card">
    <div class="card-header" id="settings_header">
      <h5>
        <button class="btn btn-link" data-toggle="collapse" data-target="#settings"
          {% if not plot_series %} aria-expanded="true" {% endif %}>Settings</button>
      </h5>
    </div>
    <div id="settings" class="collapse {% if not plot_series %} show {% endif %}"
         area-labelledby="settings_header" data-parent="#accordion">
      <div class="card-body">
        <form action="" method="POST">
          <label for="cell_line_select">Select cell line:</label>
          <select name="cell_line" class="custom-select" id="cell_line_select">
            <option value="select_cell_line" {% if not plot_series %}selected{% endif %}>
                Select cell line..</option>
            {% for cell_line in cell_lines %}
              <option value="{{ cell_line }}" {% if selected_cell_line==cell_line %}selected{% endif %}>{{ cell_line}}</option>
            {% endfor %}
          </select>
          <label class="mt-3">For zero p_values:</label>
          <div class="custom-control custom-radio">
              <input type="radio" class="custom-control-input" id="display_p_values" name="p_values" value="display"
                  {% if p_values=="display" or not p_values %}checked{% endif %}>
              <label class="custom-control-label" for="display_p_values">Display points with zero p_values</label>
          </div>
          <div class="custom-control custom-radio">
              <input type="radio" class="custom-control-input" id="drop_p_values" name="p_values" value="drop"
              {% if p_values=="drop" %}checked{% endif %}>
              <label class="custom-control-label" for="drop_p_values">Drop points with zero p_values</label>
          </div>
          {#
          <div class="custom-control custom-radio">
              <input type="radio" class="custom-control-input" id="highlight_p_values" name="p_values" value="highlight"
              {% if p_values=="highlight" %}checked{% endif %}>
              <label class="custom-control-label" for="highlight_p_values">Highlight points with zero p_values</label>
          </div> #}
          <button class="btn btn-outline-info mt-4" type="submit" id="plot_button">Plot data</button>
        </form>
      </div>
    </div>
    <div class="card-header" id="results_header">
      <h5>
        <button class="btn btn-link" data-toggle="collapse" data-target="#results"
          {% if plot_series %} area-expanded="true" {% endif %}>Results</button>
      </h5>
    </div>
    <div id="results" class="collapse {% if selected_cell_line %} show {% endif %}"
         area-labelledby="results_header" data-parent="#accordion">
      <div class="card-body">
        <div id="cell_line_chart" data-plot-series="{{ plot_series }}" data-genes="{{ genes }}"></div>
      </div>
    </div>
  </div>
</div>
{% endblock %}