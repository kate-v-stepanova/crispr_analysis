{% extends "layout.html" %}
{% block body %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/choices.min.css') }}">
<script src="{{ url_for('static', filename='js/highcharts.js') }}"></script>
<script src="{{ url_for('static', filename='js/choices.min.js') }}"></script>
<script src="{{ url_for('static', filename='custom_js/compare.js') }}"></script>
<form action="" method="POST">
  <label for="first_cell_line">Select x axis:</label>
  <select name="x_axis" class="custom-select" id="first_cell_line">
    <option value="select_cell_line" {% if not plot_series %}selected{% endif %}>
        Select x axis..</option>
    {% for cell_line in cell_lines %}
      <option value="{{ cell_line }}" {% if x_axis==cell_line %}selected{% endif %}>{{ cell_line}}</option>
    {% endfor %}
  </select>
  <label for="multiple_cell_lines" class="mt-3">Select multiple cell lines for y axis:</label>
  <select multiple name="y_axis_multiple" id="multiple_cell_lines" placeholder="Search cell line">
    {% for cell_line in cell_lines %}
      <option value="{{ cell_line }}" name="{{ cell_line }}" {% if cell_line in y_axis_multiple %}selected{% endif %}>
        {{ cell_line }}</option>
    {% endfor %}
  </select>

  <label class="mt-3">All cell lines on one plot/multiple plots?</label>
  <div class="custom-control custom-radio">
      <input type="radio" class="custom-control-input" id="single_plot" name="how_to_plot" value="single_plot"
          {% if how_to_plot=="single_plot" or not how_to_plot %}checked{% endif %}>
      <label class="custom-control-label" for="single_plot">One plot</label>
  </div>
  <div class="custom-control custom-radio">
      <input type="radio" class="custom-control-input" id="multiple_plots" name="how_to_plot" value="multiple_plots"
      {% if how_to_plot=="multiple_plots" %}checked{% endif %}>
      <label class="custom-control-label" for="multiple_plots">Multiple plots</label>
  </div>

  <button class="btn btn-outline-info mt-4" type="submit" id="plot_button">Plot data</button>
</form>
{% if how_to_plot=='single_plot' %}
  <div id="cell_line_chart" data-plot-series="{{ plot_series.values() | list() }}"></div>
{% elif how_to_plot=='multiple_plots' %}
  {% for cell_line in y_axis_multiple %}
    <div id="{{ cell_line }}_chart" data-plot-series="{{ plot_series[cell_line] }}"></div>
  {% endfor %}
{% endif %}
{% endblock %}